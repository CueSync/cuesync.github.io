{"version":3,"file":"cuesync.js","sources":["../../js/src/helpers/data.js","../../js/src/helpers/util.js","../../js/src/helpers/manipulator.js","../../js/src/helpers/config.js","../../js/src/helpers/base-component.js","../../js/src/cuesync.js","../../js/index.umd.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * Constants\n */\n\nconst elementMap = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map())\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`CueSync doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`)\n      return\n    }\n\n    instanceMap.set(key, instance)\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null\n    }\n\n    return null\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    instanceMap.delete(key)\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element)\n    }\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n// Shout-out Angus Croll (https://goo.gl/pxwQGp)\nconst toType = object => {\n  if (object === null || object === undefined) {\n    return `${object}`\n  }\n\n  return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\nconst isElement = object => {\n  if (!object || typeof object !== 'object') {\n    return false\n  }\n\n  return typeof object.nodeType !== 'undefined'\n}\n\nconst getElement = object => {\n  if (isElement(object)) {\n    return object\n  }\n\n  if (typeof object === 'string' && object.length > 0) {\n    return document.querySelector(object)\n  }\n\n  return null\n}\n\nexport {\n  getElement,\n  isElement,\n  toType\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nfunction normalizeData(value) {\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  if (value === Number(value).toString()) {\n    return Number(value)\n  }\n\n  if (value === '' || value === 'null') {\n    return null\n  }\n\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  try {\n    return JSON.parse(decodeURIComponent(value))\n  } catch {\n    return value\n  }\n}\n\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`)\n}\n\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-cs-${normalizeDataKey(key)}`, value)\n  },\n\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-cs-${normalizeDataKey(key)}`)\n  },\n\n  getDataAttributes(element) {\n    if (!element) {\n      return {}\n    }\n\n    const attributes = {}\n    const csKeys = Object.keys(element.dataset).filter(key => key.startsWith('cs') && !key.startsWith('csConfig'))\n\n    for (const key of csKeys) {\n      let pureKey = key.replace(/^cs/, '')\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length)\n      attributes[pureKey] = normalizeData(element.dataset[key])\n    }\n\n    return attributes\n  },\n\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-cs-${normalizeDataKey(key)}`))\n  }\n}\n\nexport default Manipulator\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/config.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isElement, toType } from './util.js'\nimport Manipulator from './manipulator.js'\n\n/**\n * Class definition\n */\n\nclass Config {\n  // Getters\n  static get Default() {\n    return {}\n  }\n\n  static get DefaultType() {\n    return {}\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!')\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    return config\n  }\n\n  _mergeConfigObj(config, element) {\n    const jsonConfig = isElement(element) ? Manipulator.getDataAttribute(element, 'config') : {} // try to parse\n\n    return {\n      ...this.constructor.Default,\n      ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n      ...(isElement(element) ? Manipulator.getDataAttributes(element) : {}),\n      ...(typeof config === 'object' ? config : {})\n    }\n  }\n\n  _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n    for (const property of Object.keys(configTypes)) {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = isElement(value) ? 'element' : toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new TypeError(\n          `${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`\n        )\n      }\n    }\n  }\n}\n\nexport default Config\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './data.js'\nimport { getElement } from './util.js'\nimport Config from './config.js'\n\n/**\n * Constants\n */\n\nconst VERSION = '1.0.0-alpha1'\n\n/**\n * Class definition\n */\n\nclass BaseComponent extends Config {\n  constructor(element, config) {\n    super()\n\n    element = getElement(element)\n    if (!element) {\n      return\n    }\n\n    this._element = element\n    this._config = this._getConfig(config)\n\n    Data.set(this._element, this.constructor.DATA_KEY, this)\n  }\n\n  // Public\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY)\n\n    for (const propertyName of Object.getOwnPropertyNames(this)) {\n      this[propertyName] = null\n    }\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config, this._element)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  // Static\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY)\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null)\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get DATA_KEY() {\n    return `cs.${this.NAME}`\n  }\n}\n\nexport default BaseComponent\n","/**\n * --------------------------------------------------------------------------\n * CueSync cuesync.js\n * Licensed under MIT (https://github.com/cuesync/cuesync.github.io/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './helpers/base-component.js'\n\nconst NAME = 'cuesync'\n\nclass CueSync extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._element = element\n    this._config = this._getConfig(config)\n    this._autoScroll = true\n    this._timeMaxWidth = 0\n    this.refresh()\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  refresh() {\n    const { transcriptPath } = this._config\n    const { media } = this._config\n    const { displayTime } = this._config\n\n    // Load and parse the transcript file\n    fetch(transcriptPath)\n      .then(response => response.text())\n      .then(data => {\n        const cues = this.parseTranscript(data)\n\n        // Create transcript lines and add them to the container\n        for (const [index, cue] of cues.entries()) {\n          const line = document.createElement('div')\n          line.className = 'transcript-line'\n          line.textContent = cue.text.trim()\n\n          if (displayTime) {\n            const transcriptLineContainer = document.createElement('div')\n            transcriptLineContainer.className = 'transcript-line-container'\n            transcriptLineContainer.setAttribute('aria-label', cue.text.trim())\n            transcriptLineContainer.setAttribute('role', 'button')\n\n            const timeContainer = document.createElement('span')\n            timeContainer.className = 'time'\n            timeContainer.textContent = `${cue.startTimeRaw}`\n\n            transcriptLineContainer.append(timeContainer)\n            transcriptLineContainer.append(line)\n            this._element.append(transcriptLineContainer)\n\n            transcriptLineContainer.addEventListener('click', () => {\n              media.currentTime = cue.startTime\n            })\n\n            transcriptLineContainer.addEventListener('keypress', e => {\n              if (e.key === 'Enter') {\n                media.currentTime = cue.startTime\n              }\n            })\n\n            transcriptLineContainer.tabIndex = 0\n\n            if (timeContainer.getBoundingClientRect().width > this._timeMaxWidth) {\n              this._timeMaxWidth = timeContainer.getBoundingClientRect().width\n            }\n          } else {\n            this._element.append(line)\n\n            line.setAttribute('aria-label', cue.text.trim())\n            line.setAttribute('role', 'button')\n\n            line.addEventListener('click', () => {\n              media.currentTime = cue.startTime\n            })\n\n            line.addEventListener('keypress', e => {\n              if (e.key === 'Enter') {\n                media.currentTime = cue.startTime\n              }\n            })\n\n            line.tabIndex = 0\n          }\n\n          this._element.addEventListener('scroll', () => {\n            if (this._autoScroll) {\n              this._autoScroll = false\n            }\n          })\n\n          // Update transcript highlighting based on media time\n          this.addMediaEventListener(line, cues, cue, index)\n        }\n\n        if (this._timeMaxWidth) {\n          this._element.style.setProperty('--cs-time-width', `${this._timeMaxWidth}px`)\n        }\n      })\n      .catch(error => console.error('Error loading transcript file:', error)) // eslint-disable-line no-console\n  }\n\n  // Function to parse SRT or VTT text into cue objects\n  parseTranscript(text) {\n    const cues = []\n    const lines = text.split('\\n')\n    let cue = null\n\n    for (let line of lines) {\n      line = line.trim()\n      if (!line) {\n        // Empty line\n        if (cue) {\n          cues.push(cue)\n        }\n\n        cue = null\n      }\n\n      if (!cue && /^\\d+$/.test(line)) {\n        // This is a line number (SRT format)\n        continue\n      } else if (line.includes('-->')) {\n        // Parse cue timing (both SRT and VTT formats)\n        const [startTime, endTime] = line.split(/ --> /)\n        cue = new VTTCue(this.convertToSeconds(startTime), this.convertToSeconds(endTime), '')\n        cue.startTimeRaw = this.minimalTime(startTime)\n      } else if (cue) {\n        // Add cue text (both SRT and VTT formats)\n        cue.text += `${line} `\n      }\n    }\n\n    if (cue) {\n      cues.push(cue)\n    }\n\n    return cues\n  }\n\n  convertToSeconds(time) {\n    const [hours, minutes, seconds] = time.split(/:|,/).map(Number.parseFloat)\n\n    return ((hours * 3600) + (minutes * 60) + seconds).toFixed(2)\n  }\n\n  minimalTime(time) {\n    const [hours, minutes, seconds] = time.split(/:|,/).map(Number.parseFloat)\n\n    return `${hours === 0 ? '' : `${hours} : `} ${minutes} : ${Math.trunc(seconds)}`\n  }\n\n  autoScroll(line) {\n    if (this._autoScroll) {\n      this.scrollToView(line)\n    } else {\n      const parentRect = this._element.getBoundingClientRect()\n      const elementRect = line.getBoundingClientRect()\n\n      if (elementRect.top >= parentRect.top && elementRect.bottom <= parentRect.bottom) {\n        this._autoScroll = true\n      }\n    }\n  }\n\n  scrollToView(element) {\n    const parent = element.closest('.transcript-container')\n\n    const elementOffset = element.offsetTop - parent.offsetTop\n    const elementHeight = element.offsetHeight\n    const parentHeight = parent.clientHeight\n\n    // Calculate the current scroll position of the parent\n    const parentScrollTop = parent.scrollTop\n\n    // Check if the element is above the visible area\n    if (elementOffset < parentScrollTop) {\n      // Scroll up to make the element visible at the top\n      parent.scrollTo({\n        top: elementOffset,\n        left: 0,\n        behavior: 'smooth'\n      })\n    } else if (elementOffset + elementHeight > parentScrollTop + parentHeight) {\n      // Scroll down to make the element visible at the bottom\n      parent.scrollTo({\n        top: elementOffset + elementHeight - parentHeight,\n        left: 0,\n        behavior: 'smooth'\n      })\n    }\n    // If the element is already visible, no scrolling is needed\n  }\n\n  addMediaEventListener(line, cues, cue, index) {\n    const { media } = this._config\n    const { displayTime } = this._config\n\n    media.addEventListener('timeupdate', () => {\n      if (index === cues.length - 1 && media.currentTime >= cue.startTime) {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.add('active')\n        } else {\n          line.classList.add('active')\n        }\n\n        this.autoScroll(line)\n      } else if (media.currentTime >= cue.startTime && media.currentTime < cue.endTime) {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.add('active')\n        } else {\n          line.classList.add('active')\n        }\n\n        this.autoScroll(line)\n      } else {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.remove('active')\n        } else {\n          line.classList.remove('active')\n        }\n\n        if (media.currentTime >= cue.startTime) {\n          if (displayTime) {\n            line.closest('.transcript-line-container').classList.add('played')\n          } else {\n            line.classList.add('played')\n          }\n        } else if (displayTime) {\n          line.closest('.transcript-line-container').classList.remove('played')\n        } else {\n          line.classList.remove('played')\n        }\n      }\n    })\n  }\n\n  redrawTime() {\n    const timeList = Array.prototype.slice.call(this._element.querySelectorAll('.time'))\n\n    if (timeList) {\n      let maxWidth = 0\n      for (const t of timeList) {\n        if (t.getBoundingClientRect().width > maxWidth) {\n          maxWidth = t.getBoundingClientRect().width\n        }\n      }\n\n      if (maxWidth) {\n        this._element.style.setProperty('--cs-time-width', `${maxWidth}px`)\n      }\n    }\n  }\n}\n\nexport default CueSync\n","/**\n * --------------------------------------------------------------------------\n * CueSync index.umd.js\n * Licensed under MIT (https://github.com/cuesync/cuesync.github.io/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport CueSync from './src/cuesync.js'\n\nexport default { CueSync }\n"],"names":["elementMap","Map","set","element","key","instance","has","instanceMap","get","size","console","error","Array","from","keys","remove","delete","toType","object","undefined","Object","prototype","toString","call","match","toLowerCase","isElement","nodeType","getElement","length","document","querySelector","normalizeData","value","Number","JSON","parse","decodeURIComponent","_unused","normalizeDataKey","replace","chr","Manipulator","setDataAttribute","setAttribute","removeDataAttribute","removeAttribute","getDataAttributes","attributes","csKeys","dataset","filter","startsWith","pureKey","charAt","slice","getDataAttribute","getAttribute","Config","Default","DefaultType","NAME","Error","_getConfig","config","_mergeConfigObj","_configAfterMerge","_typeCheckConfig","jsonConfig","constructor","configTypes","property","expectedTypes","valueType","RegExp","test","TypeError","toUpperCase","VERSION","BaseComponent","_element","_config","Data","DATA_KEY","dispose","propertyName","getOwnPropertyNames","getInstance","getOrCreateInstance","CueSync","_autoScroll","_timeMaxWidth","refresh","transcriptPath","media","displayTime","fetch","then","response","text","data","cues","parseTranscript","index","cue","entries","line","createElement","className","textContent","trim","transcriptLineContainer","timeContainer","startTimeRaw","append","addEventListener","currentTime","startTime","e","tabIndex","getBoundingClientRect","width","addMediaEventListener","style","setProperty","catch","lines","split","push","includes","endTime","VTTCue","convertToSeconds","minimalTime","time","hours","minutes","seconds","map","parseFloat","toFixed","Math","trunc","autoScroll","scrollToView","parentRect","elementRect","top","bottom","parent","closest","elementOffset","offsetTop","elementHeight","offsetHeight","parentHeight","clientHeight","parentScrollTop","scrollTop","scrollTo","left","behavior","classList","add","redrawTime","timeList","querySelectorAll","maxWidth","t"],"mappings":"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"}