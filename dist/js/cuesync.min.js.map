{"version":3,"names":["elementMap","Map","Data","set","element","key","instance","has","instanceMap","get","size","console","error","Array","from","keys","remove","delete","isElement","object","nodeType","getElement","length","document","querySelector","normalizeData","value","Number","toString","JSON","parse","decodeURIComponent","_unused","normalizeDataKey","replace","chr","toLowerCase","Manipulator","setDataAttribute","setAttribute","removeDataAttribute","removeAttribute","getDataAttributes","attributes","csKeys","Object","dataset","filter","startsWith","pureKey","charAt","slice","getDataAttribute","getAttribute","Config","Default","DefaultType","NAME","Error","_getConfig","config","this","_mergeConfigObj","_configAfterMerge","_typeCheckConfig","jsonConfig","constructor","configTypes","property","expectedTypes","valueType","prototype","call","match","RegExp","test","TypeError","toUpperCase","BaseComponent","super","_element","_config","DATA_KEY","dispose","propertyName","getOwnPropertyNames","getInstance","getOrCreateInstance","VERSION","CueSync","_autoScroll","_timeMaxWidth","refresh","transcriptPath","media","displayTime","fetch","then","response","text","data","cues","parseTranscript","index","cue","entries","line","createElement","className","textContent","trim","transcriptLineContainer","timeContainer","startTimeRaw","append","addEventListener","currentTime","startTime","e","tabIndex","getBoundingClientRect","width","addMediaEventListener","style","setProperty","catch","lines","split","push","includes","endTime","VTTCue","convertToSeconds","minimalTime","time","hours","minutes","seconds","map","parseFloat","toFixed","Math","trunc","autoScroll","scrollToView","parentRect","elementRect","top","bottom","parent","closest","elementOffset","offsetTop","elementHeight","offsetHeight","parentHeight","clientHeight","parentScrollTop","scrollTop","scrollTo","left","behavior","classList","add","redrawTime","timeList","querySelectorAll","maxWidth","t"],"sources":["../../js/src/helpers/data.js","../../js/src/helpers/util.js","../../js/src/helpers/manipulator.js","../../js/src/helpers/config.js","../../js/src/helpers/base-component.js","../../js/index.umd.js","../../js/src/cuesync.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * Constants\n */\n\nconst elementMap = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map())\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`CueSync doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`)\n      return\n    }\n\n    instanceMap.set(key, instance)\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null\n    }\n\n    return null\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    instanceMap.delete(key)\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element)\n    }\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n// Shout-out Angus Croll (https://goo.gl/pxwQGp)\nconst toType = object => {\n  if (object === null || object === undefined) {\n    return `${object}`\n  }\n\n  return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\nconst isElement = object => {\n  if (!object || typeof object !== 'object') {\n    return false\n  }\n\n  return typeof object.nodeType !== 'undefined'\n}\n\nconst getElement = object => {\n  if (isElement(object)) {\n    return object\n  }\n\n  if (typeof object === 'string' && object.length > 0) {\n    return document.querySelector(object)\n  }\n\n  return null\n}\n\nexport {\n  getElement,\n  isElement,\n  toType\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nfunction normalizeData(value) {\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  if (value === Number(value).toString()) {\n    return Number(value)\n  }\n\n  if (value === '' || value === 'null') {\n    return null\n  }\n\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  try {\n    return JSON.parse(decodeURIComponent(value))\n  } catch {\n    return value\n  }\n}\n\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`)\n}\n\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-cs-${normalizeDataKey(key)}`, value)\n  },\n\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-cs-${normalizeDataKey(key)}`)\n  },\n\n  getDataAttributes(element) {\n    if (!element) {\n      return {}\n    }\n\n    const attributes = {}\n    const csKeys = Object.keys(element.dataset).filter(key => key.startsWith('cs') && !key.startsWith('csConfig'))\n\n    for (const key of csKeys) {\n      let pureKey = key.replace(/^cs/, '')\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length)\n      attributes[pureKey] = normalizeData(element.dataset[key])\n    }\n\n    return attributes\n  },\n\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-cs-${normalizeDataKey(key)}`))\n  }\n}\n\nexport default Manipulator\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/config.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isElement, toType } from './util.js'\nimport Manipulator from './manipulator.js'\n\n/**\n * Class definition\n */\n\nclass Config {\n  // Getters\n  static get Default() {\n    return {}\n  }\n\n  static get DefaultType() {\n    return {}\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!')\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    return config\n  }\n\n  _mergeConfigObj(config, element) {\n    const jsonConfig = isElement(element) ? Manipulator.getDataAttribute(element, 'config') : {} // try to parse\n\n    return {\n      ...this.constructor.Default,\n      ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n      ...(isElement(element) ? Manipulator.getDataAttributes(element) : {}),\n      ...(typeof config === 'object' ? config : {})\n    }\n  }\n\n  _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n    for (const property of Object.keys(configTypes)) {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = isElement(value) ? 'element' : toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new TypeError(\n          `${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`\n        )\n      }\n    }\n  }\n}\n\nexport default Config\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './data.js'\nimport { getElement } from './util.js'\nimport Config from './config.js'\n\n/**\n * Constants\n */\n\nconst VERSION = '1.0.0-alpha1'\n\n/**\n * Class definition\n */\n\nclass BaseComponent extends Config {\n  constructor(element, config) {\n    super()\n\n    element = getElement(element)\n    if (!element) {\n      return\n    }\n\n    this._element = element\n    this._config = this._getConfig(config)\n\n    Data.set(this._element, this.constructor.DATA_KEY, this)\n  }\n\n  // Public\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY)\n\n    for (const propertyName of Object.getOwnPropertyNames(this)) {\n      this[propertyName] = null\n    }\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config, this._element)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  // Static\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY)\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null)\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get DATA_KEY() {\n    return `cs.${this.NAME}`\n  }\n}\n\nexport default BaseComponent\n","/**\n * --------------------------------------------------------------------------\n * CueSync index.umd.js\n * Licensed under MIT (https://github.com/cuesync/cuesync.github.io/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport CueSync from './src/cuesync.js'\n\nexport default { CueSync }\n","/**\n * --------------------------------------------------------------------------\n * CueSync cuesync.js\n * Licensed under MIT (https://github.com/cuesync/cuesync.github.io/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './helpers/base-component.js'\n\nconst NAME = 'cuesync'\n\nclass CueSync extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._element = element\n    this._config = this._getConfig(config)\n    this._autoScroll = true\n    this._timeMaxWidth = 0\n    this.refresh()\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  refresh() {\n    const { transcriptPath } = this._config\n    const { media } = this._config\n    const { displayTime } = this._config\n\n    // Load and parse the transcript file\n    fetch(transcriptPath)\n      .then(response => response.text())\n      .then(data => {\n        const cues = this.parseTranscript(data)\n\n        // Create transcript lines and add them to the container\n        for (const [index, cue] of cues.entries()) {\n          const line = document.createElement('div')\n          line.className = 'transcript-line'\n          line.textContent = cue.text.trim()\n\n          if (displayTime) {\n            const transcriptLineContainer = document.createElement('div')\n            transcriptLineContainer.className = 'transcript-line-container'\n            transcriptLineContainer.setAttribute('aria-label', cue.text.trim())\n            transcriptLineContainer.setAttribute('role', 'button')\n\n            const timeContainer = document.createElement('span')\n            timeContainer.className = 'time'\n            timeContainer.textContent = `${cue.startTimeRaw}`\n\n            transcriptLineContainer.append(timeContainer)\n            transcriptLineContainer.append(line)\n            this._element.append(transcriptLineContainer)\n\n            transcriptLineContainer.addEventListener('click', () => {\n              media.currentTime = cue.startTime\n            })\n\n            transcriptLineContainer.addEventListener('keypress', e => {\n              if (e.key === 'Enter') {\n                media.currentTime = cue.startTime\n              }\n            })\n\n            transcriptLineContainer.tabIndex = 0\n\n            if (timeContainer.getBoundingClientRect().width > this._timeMaxWidth) {\n              this._timeMaxWidth = timeContainer.getBoundingClientRect().width\n            }\n          } else {\n            this._element.append(line)\n\n            line.setAttribute('aria-label', cue.text.trim())\n            line.setAttribute('role', 'button')\n\n            line.addEventListener('click', () => {\n              media.currentTime = cue.startTime\n            })\n\n            line.addEventListener('keypress', e => {\n              if (e.key === 'Enter') {\n                media.currentTime = cue.startTime\n              }\n            })\n\n            line.tabIndex = 0\n          }\n\n          this._element.addEventListener('scroll', () => {\n            if (this._autoScroll) {\n              this._autoScroll = false\n            }\n          })\n\n          // Update transcript highlighting based on media time\n          this.addMediaEventListener(line, cues, cue, index)\n        }\n\n        if (this._timeMaxWidth) {\n          this._element.style.setProperty('--cs-time-width', `${this._timeMaxWidth}px`)\n        }\n      })\n      .catch(error => console.error('Error loading transcript file:', error)) // eslint-disable-line no-console\n  }\n\n  // Function to parse SRT or VTT text into cue objects\n  parseTranscript(text) {\n    const cues = []\n    const lines = text.split('\\n')\n    let cue = null\n\n    for (let line of lines) {\n      line = line.trim()\n      if (!line) {\n        // Empty line\n        if (cue) {\n          cues.push(cue)\n        }\n\n        cue = null\n      }\n\n      if (!cue && /^\\d+$/.test(line)) {\n        // This is a line number (SRT format)\n        continue\n      } else if (line.includes('-->')) {\n        // Parse cue timing (both SRT and VTT formats)\n        const [startTime, endTime] = line.split(/ --> /)\n        cue = new VTTCue(this.convertToSeconds(startTime), this.convertToSeconds(endTime), '')\n        cue.startTimeRaw = this.minimalTime(startTime)\n      } else if (cue) {\n        // Add cue text (both SRT and VTT formats)\n        cue.text += `${line} `\n      }\n    }\n\n    if (cue) {\n      cues.push(cue)\n    }\n\n    return cues\n  }\n\n  convertToSeconds(time) {\n    const [hours, minutes, seconds] = time.split(/:|,/).map(Number.parseFloat)\n\n    return ((hours * 3600) + (minutes * 60) + seconds).toFixed(2)\n  }\n\n  minimalTime(time) {\n    const [hours, minutes, seconds] = time.split(/:|,/).map(Number.parseFloat)\n\n    return `${hours === 0 ? '' : `${hours} : `} ${minutes} : ${Math.trunc(seconds)}`\n  }\n\n  autoScroll(line) {\n    if (this._autoScroll) {\n      this.scrollToView(line)\n    } else {\n      const parentRect = this._element.getBoundingClientRect()\n      const elementRect = line.getBoundingClientRect()\n\n      if (elementRect.top >= parentRect.top && elementRect.bottom <= parentRect.bottom) {\n        this._autoScroll = true\n      }\n    }\n  }\n\n  scrollToView(element) {\n    const parent = element.closest('.transcript-container')\n\n    const elementOffset = element.offsetTop - parent.offsetTop\n    const elementHeight = element.offsetHeight\n    const parentHeight = parent.clientHeight\n\n    // Calculate the current scroll position of the parent\n    const parentScrollTop = parent.scrollTop\n\n    // Check if the element is above the visible area\n    if (elementOffset < parentScrollTop) {\n      // Scroll up to make the element visible at the top\n      parent.scrollTo({\n        top: elementOffset,\n        left: 0,\n        behavior: 'smooth'\n      })\n    } else if (elementOffset + elementHeight > parentScrollTop + parentHeight) {\n      // Scroll down to make the element visible at the bottom\n      parent.scrollTo({\n        top: elementOffset + elementHeight - parentHeight,\n        left: 0,\n        behavior: 'smooth'\n      })\n    }\n    // If the element is already visible, no scrolling is needed\n  }\n\n  addMediaEventListener(line, cues, cue, index) {\n    const { media } = this._config\n    const { displayTime } = this._config\n\n    media.addEventListener('timeupdate', () => {\n      if (index === cues.length - 1 && media.currentTime >= cue.startTime) {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.add('active')\n        } else {\n          line.classList.add('active')\n        }\n\n        this.autoScroll(line)\n      } else if (media.currentTime >= cue.startTime && media.currentTime < cue.endTime) {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.add('active')\n        } else {\n          line.classList.add('active')\n        }\n\n        this.autoScroll(line)\n      } else {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.remove('active')\n        } else {\n          line.classList.remove('active')\n        }\n\n        if (media.currentTime >= cue.startTime) {\n          if (displayTime) {\n            line.closest('.transcript-line-container').classList.add('played')\n          } else {\n            line.classList.add('played')\n          }\n        } else if (displayTime) {\n          line.closest('.transcript-line-container').classList.remove('played')\n        } else {\n          line.classList.remove('played')\n        }\n      }\n    })\n  }\n\n  redrawTime() {\n    const timeList = Array.prototype.slice.call(this._element.querySelectorAll('.time'))\n\n    if (timeList) {\n      let maxWidth = 0\n      for (const t of timeList) {\n        if (t.getBoundingClientRect().width > maxWidth) {\n          maxWidth = t.getBoundingClientRect().width\n        }\n      }\n\n      if (maxWidth) {\n        this._element.style.setProperty('--cs-time-width', `${maxWidth}px`)\n      }\n    }\n  }\n}\n\nexport default CueSync\n"],"mappings":"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"}