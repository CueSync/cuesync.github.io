{"version":3,"names":["elementMap","Map","Data","set","element","key","instance","has","instanceMap","get","size","console","error","Array","from","keys","remove","delete","toType","object","Object","prototype","toString","call","match","toLowerCase","isElement","nodeType","getElement","length","document","querySelector","normalizeData","value","Number","JSON","parse","decodeURIComponent","_unused","normalizeDataKey","replace","chr","Manipulator","setDataAttribute","setAttribute","removeDataAttribute","removeAttribute","getDataAttributes","attributes","csKeys","dataset","filter","startsWith","pureKey","charAt","slice","getDataAttribute","getAttribute","Config","Default","DefaultType","NAME","Error","_getConfig","config","this","_mergeConfigObj","_configAfterMerge","_typeCheckConfig","jsonConfig","constructor","configTypes","property","expectedTypes","valueType","RegExp","test","TypeError","toUpperCase","VERSION","BaseComponent","super","_element","_config","DATA_KEY","dispose","propertyName","getOwnPropertyNames","getInstance","getOrCreateInstance","Cuesync","_autoScroll","_timeMaxWidth","refresh","transcriptPath","media","displayTime","fetch","then","response","text","data","cues","parseTranscript","index","cue","entries","line","createElement","className","textContent","trim","transcriptLineContainer","timeContainer","startTimeRaw","append","addEventListener","currentTime","startTime","e","tabIndex","getBoundingClientRect","width","addMediaEventListener","style","setProperty","catch","lines","split","push","includes","endTime","VTTCue","convertToSeconds","minimalTime","time","hours","minutes","seconds","map","parseFloat","toFixed","Math","trunc","autoScroll","scrollToView","parentRect","elementRect","top","bottom","parent","parentElement","elementOffset","offsetTop","elementHeight","offsetHeight","parentHeight","clientHeight","parentScrollTop","scrollTop","scrollTo","left","behavior","closest","classList","add","redrawTime","timeList","querySelectorAll","maxWidth","t"],"sources":["../../js/src/helpers/data.js","../../js/src/helpers/util.js","../../js/src/helpers/manipulator.js","../../js/src/helpers/config.js","../../js/src/helpers/base-component.js","../../js/src/cuesync.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * Constants\n */\n\nconst elementMap = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map())\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`CueSync doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`)\n      return\n    }\n\n    instanceMap.set(key, instance)\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null\n    }\n\n    return null\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    instanceMap.delete(key)\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element)\n    }\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n// Shout-out Angus Croll (https://goo.gl/pxwQGp)\nconst toType = object => {\n  if (object === null || object === undefined) {\n    return `${object}`\n  }\n\n  return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\nconst isElement = object => {\n  if (!object || typeof object !== 'object') {\n    return false\n  }\n\n  return typeof object.nodeType !== 'undefined'\n}\n\nconst getElement = object => {\n  if (isElement(object)) {\n    return object\n  }\n\n  if (typeof object === 'string' && object.length > 0) {\n    return document.querySelector(object)\n  }\n\n  return null\n}\n\nexport {\n  getElement,\n  isElement,\n  toType\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nfunction normalizeData(value) {\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  if (value === Number(value).toString()) {\n    return Number(value)\n  }\n\n  if (value === '' || value === 'null') {\n    return null\n  }\n\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  try {\n    return JSON.parse(decodeURIComponent(value))\n  } catch {\n    return value\n  }\n}\n\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`)\n}\n\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-cs-${normalizeDataKey(key)}`, value)\n  },\n\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-cs-${normalizeDataKey(key)}`)\n  },\n\n  getDataAttributes(element) {\n    if (!element) {\n      return {}\n    }\n\n    const attributes = {}\n    const csKeys = Object.keys(element.dataset).filter(key => key.startsWith('cs') && !key.startsWith('csConfig'))\n\n    for (const key of csKeys) {\n      let pureKey = key.replace(/^cs/, '')\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length)\n      attributes[pureKey] = normalizeData(element.dataset[key])\n    }\n\n    return attributes\n  },\n\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-cs-${normalizeDataKey(key)}`))\n  }\n}\n\nexport default Manipulator\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/config.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isElement, toType } from './util.js'\nimport Manipulator from './manipulator.js'\n\n/**\n * Class definition\n */\n\nclass Config {\n  // Getters\n  static get Default() {\n    return {}\n  }\n\n  static get DefaultType() {\n    return {}\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!')\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    return config\n  }\n\n  _mergeConfigObj(config, element) {\n    const jsonConfig = isElement(element) ? Manipulator.getDataAttribute(element, 'config') : {} // try to parse\n\n    return {\n      ...this.constructor.Default,\n      ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n      ...(isElement(element) ? Manipulator.getDataAttributes(element) : {}),\n      ...(typeof config === 'object' ? config : {})\n    }\n  }\n\n  _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n    for (const property of Object.keys(configTypes)) {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = isElement(value) ? 'element' : toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new TypeError(\n          `${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`\n        )\n      }\n    }\n  }\n}\n\nexport default Config\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './data.js'\nimport { getElement } from './util.js'\nimport Config from './config.js'\n\n/**\n * Constants\n */\n\nconst VERSION = '1.0.0'\n\n/**\n * Class definition\n */\n\nclass BaseComponent extends Config {\n  constructor(element, config) {\n    super()\n\n    element = getElement(element)\n    if (!element) {\n      return\n    }\n\n    this._element = element\n    this._config = this._getConfig(config)\n\n    Data.set(this._element, this.constructor.DATA_KEY, this)\n  }\n\n  // Public\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY)\n\n    for (const propertyName of Object.getOwnPropertyNames(this)) {\n      this[propertyName] = null\n    }\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config, this._element)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  // Static\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY)\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null)\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get DATA_KEY() {\n    return `cs.${this.NAME}`\n  }\n}\n\nexport default BaseComponent\n","/**\n * --------------------------------------------------------------------------\n * CueSync cuesync.js\n * Licensed under MIT (https://github.com/cuesync/cuesync.github.io/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './helpers/base-component.js'\n\nconst NAME = 'cuesync'\n\nclass Cuesync extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._element = element\n    this._config = this._getConfig(config)\n    this._autoScroll = true\n    this._timeMaxWidth = 0\n    this.refresh()\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  refresh() {\n    const { transcriptPath } = this._config\n    const { media } = this._config\n    const { displayTime } = this._config\n\n    // Load and parse the transcript file\n    fetch(transcriptPath)\n      .then(response => response.text())\n      .then(data => {\n        const cues = this.parseTranscript(data)\n\n        // Create transcript lines and add them to the container\n        for (const [index, cue] of cues.entries()) {\n          const line = document.createElement('div')\n          line.className = 'transcript-line'\n          line.textContent = cue.text.trim()\n\n          if (displayTime) {\n            const transcriptLineContainer = document.createElement('div')\n            transcriptLineContainer.className = 'transcript-line-container'\n            transcriptLineContainer.setAttribute('aria-label', cue.text.trim())\n            transcriptLineContainer.setAttribute('role', 'button')\n\n            const timeContainer = document.createElement('span')\n            timeContainer.className = 'time'\n            timeContainer.textContent = `${cue.startTimeRaw}`\n\n            transcriptLineContainer.append(timeContainer)\n            transcriptLineContainer.append(line)\n            this._element.append(transcriptLineContainer)\n\n            transcriptLineContainer.addEventListener('click', () => {\n              media.currentTime = cue.startTime\n            })\n\n            transcriptLineContainer.addEventListener('keypress', e => {\n              if (e.key === 'Enter') {\n                media.currentTime = cue.startTime\n              }\n            })\n\n            transcriptLineContainer.tabIndex = 0\n\n            if (timeContainer.getBoundingClientRect().width > this._timeMaxWidth) {\n              this._timeMaxWidth = timeContainer.getBoundingClientRect().width\n            }\n          } else {\n            this._element.append(line)\n\n            line.setAttribute('aria-label', cue.text.trim())\n            line.setAttribute('role', 'button')\n\n            line.addEventListener('click', () => {\n              media.currentTime = cue.startTime\n            })\n\n            line.addEventListener('keypress', e => {\n              if (e.key === 'Enter') {\n                media.currentTime = cue.startTime\n              }\n            })\n\n            line.tabIndex = 0\n          }\n\n          this._element.addEventListener('scroll', () => {\n            if (this._autoScroll) {\n              this._autoScroll = false\n            }\n          })\n\n          // Update transcript highlighting based on media time\n          this.addMediaEventListener(line, cues, cue, index)\n        }\n\n        if (this._timeMaxWidth) {\n          this._element.style.setProperty('--cs-time-width', `${this._timeMaxWidth}px`)\n        }\n      })\n      .catch(error => console.error('Error loading transcript file:', error)) // eslint-disable-line no-console\n  }\n\n  // Function to parse SRT or VTT text into cue objects\n  parseTranscript(text) {\n    const cues = []\n    const lines = text.split('\\n')\n    let cue = null\n\n    for (let line of lines) {\n      line = line.trim()\n      if (!line) {\n        // Empty line\n        if (cue) {\n          cues.push(cue)\n        }\n\n        cue = null\n      }\n\n      if (!cue && /^\\d+$/.test(line)) {\n        // This is a line number (SRT format)\n        continue\n      } else if (line.includes('-->')) {\n        // Parse cue timing (both SRT and VTT formats)\n        const [startTime, endTime] = line.split(/ --> /)\n        cue = new VTTCue(this.convertToSeconds(startTime), this.convertToSeconds(endTime), '')\n        cue.startTimeRaw = this.minimalTime(startTime)\n      } else if (cue) {\n        // Add cue text (both SRT and VTT formats)\n        cue.text += `${line} `\n      }\n    }\n\n    if (cue) {\n      cues.push(cue)\n    }\n\n    return cues\n  }\n\n  convertToSeconds(time) {\n    const [hours, minutes, seconds] = time.split(/:|,/).map(Number.parseFloat)\n\n    return ((hours * 3600) + (minutes * 60) + seconds).toFixed(2)\n  }\n\n  minimalTime(time) {\n    const [hours, minutes, seconds] = time.split(/:|,/).map(Number.parseFloat)\n\n    return `${hours === 0 ? '' : `${hours} : `} ${minutes} : ${Math.trunc(seconds)}`\n  }\n\n  autoScroll(line) {\n    if (this._autoScroll) {\n      this.scrollToView(line)\n    } else {\n      const parentRect = this._element.getBoundingClientRect()\n      const elementRect = line.getBoundingClientRect()\n\n      if (elementRect.top >= parentRect.top && elementRect.bottom <= parentRect.bottom) {\n        this._autoScroll = true\n      }\n    }\n  }\n\n  scrollToView(element) {\n    const parent = element.parentElement\n\n    const elementOffset = element.offsetTop - parent.offsetTop\n    const elementHeight = element.offsetHeight\n    const parentHeight = parent.clientHeight\n\n    // Calculate the current scroll position of the parent\n    const parentScrollTop = parent.scrollTop\n\n    // Check if the element is above the visible area\n    if (elementOffset < parentScrollTop) {\n      // Scroll up to make the element visible at the top\n      parent.scrollTo({\n        top: elementOffset,\n        left: 0,\n        behavior: 'smooth'\n      })\n    } else if (elementOffset + elementHeight > parentScrollTop + parentHeight) {\n      // Scroll down to make the element visible at the bottom\n      parent.scrollTo({\n        top: elementOffset + elementHeight - parentHeight,\n        left: 0,\n        behavior: 'smooth'\n      })\n    }\n    // If the element is already visible, no scrolling is needed\n  }\n\n  addMediaEventListener(line, cues, cue, index) {\n    const { media } = this._config\n    const { displayTime } = this._config\n\n    media.addEventListener('timeupdate', () => {\n      if (index === cues.length - 1 && media.currentTime >= cue.startTime) {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.add('active')\n        } else {\n          line.classList.add('active')\n        }\n\n        this.autoScroll(line)\n      } else if (media.currentTime >= cue.startTime && media.currentTime < cue.endTime) {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.add('active')\n        } else {\n          line.classList.add('active')\n        }\n\n        this.autoScroll(line)\n      } else {\n        if (displayTime) {\n          line.closest('.transcript-line-container').classList.remove('active')\n        } else {\n          line.classList.remove('active')\n        }\n\n        if (media.currentTime >= cue.startTime) {\n          if (displayTime) {\n            line.closest('.transcript-line-container').classList.add('played')\n          } else {\n            line.classList.add('played')\n          }\n        } else if (displayTime) {\n          line.closest('.transcript-line-container').classList.remove('played')\n        } else {\n          line.classList.remove('played')\n        }\n      }\n    })\n  }\n\n  redrawTime() {\n    const timeList = Array.prototype.slice.call(this._element.querySelectorAll('.time'))\n\n    if (timeList) {\n      let maxWidth = 0\n      for (const t of timeList) {\n        if (t.getBoundingClientRect().width > maxWidth) {\n          maxWidth = t.getBoundingClientRect().width\n        }\n      }\n\n      if (maxWidth) {\n        this._element.style.setProperty('--cs-time-width', `${maxWidth}px`)\n      }\n    }\n  }\n}\n\nexport default Cuesync\n"],"mappings":"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"}